{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["export const refs = {\n    formElem: document.querySelector('.form'),\n    listElem: document.querySelector('.gallery-list'),\n    loadElem: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('.btn-load-more'),\n};","import axios from \"axios\";\n\nexport async function searchGallery(query, currentPage) {\n    const API_KEY = '42280765-41e7252ac679e023dc9db9847';\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const url = `${BASE_URL}${END_POINT}`;\n\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 15,\n    };\n\n    try {\n        const response = await axios.get(url, { params });\n\n        const photosArray = response.data.hits.map(photo => ({\n            id: photo.id,\n            imageUrl: photo.largeImageURL,\n            webformatURL: photo.webformatURL,\n            alt: photo.tags,\n            likes: photo.likes,\n            views: photo.views,\n            comments: photo.comments,\n            downloads: photo.downloads,\n        }));\n\n        return photosArray;\n    } catch (error) {\n        console.error('There has been a problem with your axios request:', error);\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nfunction galleryTemplate(hits) {\n    const { imageUrl, webformatURL, alt, likes, views, comments, downloads } =\n        hits;\n\n    return `<li class=\"gallery-item\">\n    <div class=\"gallery\">\n    <a class=\"gallery-link\" href=\"${imageUrl}\">\n    <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${alt}\"\n        width=360\n    />\n    </a>\n    <div class=\"gallery-info\">\n    <p class=\"item-text\">Likes: ${likes}</p>\n    <p class=\"item-text\">Views: ${views}</p>\n    <p class=\"item-text\">Comments: ${comments}</p>\n    <p class=\"item-text\">Downloads: ${downloads}</p>\n    </div>\n    </div>\n    </li>`;\n}\n\nexport function galleresTemplate(hitses) {\n    return hitses.map(galleryTemplate).join('');\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nlightbox.refresh();\n","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nimport { refs } from \"./js/refs\";\nimport { searchGallery } from \"./js/pixabay-api\";\nimport { galleresTemplate } from \"./js/render-function\";\n\nlet query;\nlet page;\nlet maxPage;\n\nrefs.formElem.addEventListener('submit', onFotmSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFotmSubmit(ev) {\n    ev.preventDefault();\n\n    query = ev.target.elements.query.value.trim();\n    page = 1;\n    showLoader();\n    if (!query) {\n        iziToast.error({\n            title: 'Sorry',\n            message: 'Please enter text to search for.',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    refs.loadElem.style.display = 'blok';\n\n    const data = await searchGallery(query, page);\n    console.log(data);\n    maxPage = Math.ceil().totalHits / 15;\n\n    refs.listElem.innerHTML = '';\n    renderImages(data);\n    hideLoader();\n    checkBtnVisibleStatus();\n    \n    refs.loadElem.style.display = 'none';\n    \n    ev.target.reset();\n}\n\nasync function onLoadMoreClick() {\n    page += 1;\n    const data = await searchGallery(query, page);\n    renderImages(data);\n    checkBtnVisibleStatus();\n}\n\nfunction renderImages(hitses) {\n    const markup = galleresTemplate(hitses);\n    refs.listElem.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoadBtn() {\n    refs.btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadBtn() {\n    refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoader() {\n\n}\n\nfunction hideLoader(){}\n\nfunction checkBtnVisibleStatus() {\n    if (page >= maxPage) {\n        hideLoadBtn();\n    } else {\n        showLoadBtn();\n    }\n}"],"names":["refs","searchGallery","query","currentPage","API_KEY","url","params","axios","photo","error","galleryTemplate","hits","imageUrl","webformatURL","alt","likes","views","comments","downloads","galleresTemplate","hitses","lightbox","SimpleLightbox","page","maxPage","onFotmSubmit","onLoadMoreClick","ev","iziToast","data","renderImages","checkBtnVisibleStatus","markup","showLoadBtn","hideLoadBtn"],"mappings":"owBAAO,MAAMA,EAAO,CAChB,SAAU,SAAS,cAAc,OAAO,EACxC,SAAU,SAAS,cAAc,eAAe,EAChD,SAAU,SAAS,cAAc,SAAS,EAC1C,YAAa,SAAS,cAAc,gBAAgB,CACxD,ECHO,eAAeC,EAAcC,EAAOC,EAAa,CACpD,MAAMC,EAAU,qCAGVC,EAAM,2BAENC,EAAS,CACX,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,EAEI,GAAI,CAcA,OAbiB,MAAMI,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAEnB,KAAK,KAAK,IAAIE,IAAU,CACjD,GAAIA,EAAM,GACV,SAAUA,EAAM,cAChB,aAAcA,EAAM,aACpB,IAAKA,EAAM,KACX,MAAOA,EAAM,MACb,MAAOA,EAAM,MACb,SAAUA,EAAM,SAChB,UAAWA,EAAM,SACpB,EAAC,CAGL,OAAQC,EAAO,CACZ,cAAQ,MAAM,oDAAqDA,CAAK,EAClEA,CACT,CACL,CClCA,SAASC,EAAgBC,EAAM,CAC3B,KAAM,CAAE,SAAAC,EAAU,aAAAC,EAAc,IAAAC,EAAK,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EACpEP,EAEJ,MAAO;AAAA;AAAA,oCAEyBC,CAAQ;AAAA;AAAA;AAAA,eAG7BC,CAAY;AAAA,eACZC,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKgBC,CAAK;AAAA,kCACLC,CAAK;AAAA,qCACFC,CAAQ;AAAA,sCACPC,CAAS;AAAA;AAAA;AAAA,UAI/C,CAEO,SAASC,EAAiBC,EAAQ,CACrC,OAAOA,EAAO,IAAIV,CAAe,EAAE,KAAK,EAAE,CAC9C,CAEA,MAAMW,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EACDD,EAAS,QAAS,EC3BlB,IAAInB,EACAqB,EACAC,EAEJxB,EAAK,SAAS,iBAAiB,SAAUyB,CAAY,EACrDzB,EAAK,YAAY,iBAAiB,QAAS0B,CAAe,EAE1D,eAAeD,EAAaE,EAAI,CAM5B,GALAA,EAAG,eAAc,EAEjBzB,EAAQyB,EAAG,OAAO,SAAS,MAAM,MAAM,OACvCJ,EAAO,EAEH,CAACrB,EAAO,CACR0B,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mCACT,SAAU,UACtB,CAAS,EACD,MACH,CAED5B,EAAK,SAAS,MAAM,QAAU,OAE9B,MAAM6B,EAAO,MAAM5B,EAAcC,EAAOqB,CAAI,EAC5C,QAAQ,IAAIM,CAAI,EAChBL,EAAU,KAAK,OAAO,UAAY,GAElCxB,EAAK,SAAS,UAAY,GAC1B8B,EAAaD,CAAI,EAEjBE,IAEA/B,EAAK,SAAS,MAAM,QAAU,OAE9B2B,EAAG,OAAO,OACd,CAEA,eAAeD,GAAkB,CAC7BH,GAAQ,EACR,MAAMM,EAAO,MAAM5B,EAAcC,EAAOqB,CAAI,EAC5CO,EAAaD,CAAI,EACjBE,GACJ,CAEA,SAASD,EAAaV,EAAQ,CAC1B,MAAMY,EAASb,EAAiBC,CAAM,EACtCpB,EAAK,SAAS,mBAAmB,YAAagC,CAAM,CACxD,CAEA,SAASC,GAAc,CACnBjC,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC9C,CAEA,SAASkC,GAAc,CACnBlC,EAAK,YAAY,UAAU,IAAI,QAAQ,CAC3C,CAQA,SAAS+B,GAAwB,CACzBR,GAAQC,EACRU,IAEAD,GAER"}